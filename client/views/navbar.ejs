<div id="navbar">
    	<a href="/">Home</a> &diam;
    	<a href="/Favorites">Favorite Pokemon</a> &diam;
		<a href="/blog/">Blog</a> &diam;
    	<span id="navwelcome">Hello, <a href="/login">stranger</a></span>
</div>

<script>
	var name = "<%=data.username %>";
	var greetNewcomer = "<input type='test'/><button type='submit'> Tell me your name </button>"

$(function() {

	var name = "<%=data.username %>";
    var greetNewcomer = "<input type='text'/><button>Tell me your name</button>";

	const sayYourName = function(){
		var visitorName = $('#navwelcome > input').val();
            $.ajax({
                url: '/welcome',
                type: 'POST',
                data: {
                    'nombre': visitorName
                },
                success: (data) => {
                    if(data=='SUCCESS') $('#navwelcome').html(`Welcome, ${visitorName}`);
                }
            });
    }
	
if(name=="") {
        $('#navwelcome').html(greetNewcomer);
        $('#navwelcome > button').on('click', sayYourName);
        $('#navwelcome > input').on('keyup', (key) => {
            if(key.keyCode==13) sayYourName();
        });
    } else {
        $('#navwelcome').html(`Welcome, ${name}`);
    }    
    });
</script>